# Набор Python-скриптов для работы с Быстрым Modbus

Эти инструменты позволяют работать с устройствами, поддерживающими Быстрый Modbus: сканировать, читать и настраивать события. Кроме этого можно читать и записывать обычные Modbus-регистры с использованием протокола Быстрого Modbus и адресации по серийному номеру.

## Обзор скриптов

1. **fast-modbus-client.py**  
   Позволяет считывать и записывать произвольные регистры. Требуется указать серийный номер устройства, команду Modbus и параметры регистра.

   ### Параметры:
   - `-d, --device`: Путь к TTY-устройству (например, `/dev/ttyUSB0`).
   - `-b, --baud`: Скорость передачи данных, по умолчанию `9600`.
   - `-s, --serial`: Серийный номер устройства (десятичный или шестнадцатеричный формат).
   - `-c, --command`: Команда Modbus (десятичный или шестнадцатеричный формат).
   - `-r, --register`: Номер регистра для чтения/записи (десятичный или шестнадцатеричный формат).
   - `-n, --count`: Количество регистров для чтения (по умолчанию `1`).
   - `-w, --write`: Значения для записи (если операция на запись, десятичный или шестнадцатеричный формат).
   - `--debug`: Включение режима отладки.
   - `--decimal-output`: Вывод значений регистров в десятичном формате.

   ### Примеры использования:
   - **Чтение регистров**:
     ```bash
     python fast-modbus-client.py -d /dev/ttyUSB0 -b 9600 -s 12345 -c 3 -r 200 -n 5
     ```
   - **Запись в регистры**:
     ```bash
     python fast-modbus-client.py -d /dev/ttyUSB0 -b 9600 -s 12345 -c 16 -r 200 -w 100 200 300 --decimal-output
     ```

2. **fast-modbus-scanner.py**  
   Выполняет сканирование сети Modbus для обнаружения подключенных устройств. Получает информацию об устройстве, включая модель, используя команды Fast Modbus.

   ### Параметры:
   - `-d, --device`: Путь к TTY-устройству (например, `/dev/ttyUSB0`).
   - `-b, --baud`: Скорость передачи данных, по умолчанию `9600`.
   - `--command`: Команда для сканирования (`0x46` или `0x60`, по умолчанию `0x46`).
   - `--debug`: Включение режима отладки.

   ### Пример использования:
   ```bash
   python fast-modbus-scanner.py -d /dev/ttyUSB0 -b 9600 --command 0x46
   ```

3. **fast-modbus-events.py**  
   Считывает данные событий с указанного устройства, поддерживает настройку флагов и длины данных для каждого события.

   ### Параметры:
   - `-d, --device`: Путь к TTY-устройству (например, `/dev/ttyUSB0`).
   - `-b, --baud`: Скорость передачи данных, по умолчанию `9600`.
   - `--min_slave_id`: Минимальный ID устройства для начала ответа, по умолчанию `1`.
   - `--max_data_length`: Максимальная длина данных события (по умолчанию `100`).
   - `--slave_id`: ID устройства, от которого было получено предыдущее событие.
   - `--flag`: Флаг, подтверждающий получение предыдущего пакета.
   - `--debug`: Включение режима отладки.

   ### Пример использования:
   ```bash
   python fast-modbus-events.py -d /dev/ttyUSB0 -b 9600 --min_slave_id 1 --max_data_length 50 --slave_id 10 --flag 1 --debug
   ```

4. **fast-modbus-config-events.py**  
   Настраивает параметры событий для u16-регистров устройств Modbus. Позволяет указывать несколько типов регистров (например, discrete, input) и приоритеты.

   ### Параметры:
   - `--device`: Путь к TTY-устройству (например, `/dev/ttyUSB0`).
   - `

--baud`: Скорость передачи данных, по умолчанию `9600`.
   - `--slave_id`: ID устройства Modbus.
   - `--config`: Строка конфигурации для настройки регистров (например, `input:60:2:1,discrete:0:8:1`).
   - `--debug`: Включение режима отладки.

   ### Пример использования:
   ```bash
   python fast-modbus-config-events.py --device /dev/ttyUSB0 --baud 9600 --slave_id 5 --config "input:60:2:1,discrete:0:8:1" --debug
   ```

## Участие в проекте

Первоначальный код сгенерирован с помощью ChatGPT от OpenAI. Вклад и улучшения приветствуются! Присылайте пулл-реквесты для добавления функциональности или улучшения документации.
