# Python-утилиты для Быстрого Modbus от Wiren Board

## Обзор
Этот репозиторий предоставляет набор Python-скриптов для эффективного взаимодействия и настройки событий в Modbus-сетях. Эти инструменты позволяют работать с устройствами, поддерживающими Быстрый Modbus: сканировать, читать и настраивать события. Кроме этого можно читать и записывать обычные Modbus-регистры с использованием протокола Быстрого Modbus и адресации по серийному номеру.

## Установка
Эти инструменты требуют Python версии 3.8 или выше.
1. Клонируйте репозиторий:
   ```bash
   git clone https://github.com/your-username/fast-modbus-python-tools.git
   ```
2. Установите необходимые зависимости:
   ```bash
   pip install -r requirements.txt
   ```

## Описание инструментов

### Основной Modbus-клиент
Скрипт `fast-modbus-client.py` позволяет выполнять операции чтения и записи Modbus-регистров. Он поддерживает:
- Чтение одного или нескольких регистров.
- Запись данных в регистры.
- Отображение значений регистров в десятичном или шестнадцатеричном формате.

#### Аргументы:
- `--device`: Указывает последовательное устройство (например, `/dev/ttyUSB0`).
- `--baud`: Скорость передачи данных для Modbus. По умолчанию 9600.
- `--slave_id`: ID Modbus-устройства.
- `--read`: Диапазон регистров для чтения (формат: `start:end`).
- `--write`: Запись значения в регистр (формат: `address:value`).
- `--output`: Формат вывода — `decimal` или `hex`.
- `--debug`: Включает вывод отладочной информации.

Для получения всех аргументов используйте:
```bash
python fast-modbus-client.py --help
```

**Пример использования**:
```bash
python fast-modbus-client.py --device /dev/ttyACM0 --baud 9600 --slave_id 126 --read 1:10 --output hex
```

### Инструмент для настройки событий
Скрипт `fast-modbus-config-events.py` настраивает уведомления о событиях для Modbus-регистров, включая и отключая события для следующих типов:
- Регистр `coil`, `discrete`, `holding` и `input`.
- Установка приоритета уведомлений для эффективного управления трафиком в сети Modbus.

#### Аргументы:
- `--device`: Указывает последовательное устройство (например, `/dev/ttyUSB0`).
- `--baud`: Скорость передачи данных для Modbus. По умолчанию 9600.
- `--slave_id`: ID Modbus-устройства.
- `--config`: Строка конфигурации (формат: `register_type:address:count:priority`), поддерживает несколько настроек через запятую.
- `--debug`: Включает вывод отладочной информации.

Для получения всех аргументов используйте:
```bash
python fast-modbus-config-events.py --help
```

**Пример использования**:
```bash
python fast-modbus-config-events.py --device /dev/ttyACM0 --baud 9600 --slave_id 126 --config "discrete:0:2:1,holding:5:2:2" --debug
```

### Чтение данных событий
Скрипт `fast-modbus-events.py` позволяет получать и анализировать данные событий от Modbus-устройств, предоставляя структурированную информацию об изменениях в регистрах. Полезен для мониторинга и отладки событийных обновлений Modbus-регистров.

#### Аргументы:
- `--device`: Указывает последовательное устройство (например, `/dev/ttyUSB0`).
- `--baud`: Скорость передачи данных для Modbus. По умолчанию 9600.
- `--flag`: Флаг подтверждения событий, необходимый для управления обработкой событий.
- `--debug`: Включает вывод отладочной информации.

Для получения всех аргументов используйте:
```bash
python fast-modbus-events.py --help
```

**Пример использования**:
```bash
python fast-modbus-events.py --device /dev/ttyACM0 --baud 9600 --flag 0x00 --debug
```

### Сканер устройств
Скрипт `fast-modbus-scanner.py` выполняет сканирование сети Modbus для обнаружения активных устройств и отображает их ID. Поддерживает конфигурацию скоростей передачи данных и предоставляет подробную отладочную информацию.

#### Аргументы:
- `--device`: Указывает последовательное устройство (например, `/dev/ttyUSB0`).
- `--baud`: Скорость передачи данных для Modbus. По умолчанию 9600.
- `--debug`: Включает вывод отладочной информации.

Для получения всех аргументов используйте:
```bash
python fast-modbus-scanner.py --help
```

**Пример использования**:
```bash
python fast-modbus-scanner.py --device /dev/ttyACM0 --baud 9600 --debug
```

## Участие
Мы приветствуем участие сообщества в улучшении инструментов! Если у вас есть идеи или исправления, создайте пулл-реквест с описанием ваших изменений. Перед отправкой убедитесь, что код соответствует стилю репозитория и хорошо протестирован.
